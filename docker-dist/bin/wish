#!/bin/bash
##
##
##

__wish-usage() {

  case $1 in

    plug)

      echo "$0 plug NAME [git-src]"

    ;;

    '')

      echo "$0 (plug|...) OPTIONS"

    ;;

  esac
}

case $1 in

  plug|pl*)

    shift;
    NAME=$1

    if [[ -z $NAME ]]
    then

      __wish-usage plug
      exit 1

    fi

    if [[ $FORCE ]]
    then

      rm -rf /www/app/plug/${NAME}

    fi

    if [[ -d /www/plug/${NAME} ]]
    then

      cp -Rfv /www/plug/${NAME} /www/app/plug/

    else

      GITSRC=$2

      if [[ -z $GITSRC ]]
      then

        __wish-usage plug
        exit 1

      fi

      if [[ $BRANCH ]]
      then

        BRANCH="-b ${BRANCH}"

      fi

      git clone ${GITOPTS} ${BRANCH} ${GITSRC} /www/app/plug/${NAME}

      if [[ $GITRM ]]
      then

        rm -rf /www/app/plug/${NAME}/.git

      fi

    fi

  ;;

esac
